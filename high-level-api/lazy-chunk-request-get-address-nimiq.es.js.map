{"version":3,"file":"lazy-chunk-request-get-address-nimiq.es.js","sources":["source-mapped://source-mapped/src/high-level-api/requests/nimiq/request-get-address-nimiq.ts"],"sourcesContent":["import RequestWithKeyPathNimiq from './request-with-key-path-nimiq';\nimport { RequestTypeNimiq } from '../../constants';\nimport ErrorState, { ErrorType } from '../../error-state';\n\ntype Transport = import('@ledgerhq/hw-transport').default;\n\nexport default class RequestGetAddressNimiq extends RequestWithKeyPathNimiq<string> {\n    public readonly type: RequestTypeNimiq.GET_ADDRESS;\n    public readonly display?: boolean;\n    public readonly expectedAddress?: string;\n\n    constructor(keyPath: string, display?: boolean, expectedAddress?: string, expectedWalletId?: string) {\n        const type = RequestTypeNimiq.GET_ADDRESS;\n        super(keyPath, expectedWalletId, { type, display, expectedAddress });\n        this.type = type;\n        this.display = display;\n        this.expectedAddress = expectedAddress;\n    }\n\n    public async call(transport: Transport): Promise<string> {\n        const api = await this._getLowLevelApi(transport); // throws LOADING_DEPENDENCIES_FAILED on failure\n        const { address } = await api.getAddress(\n            this.keyPath,\n            true, // validate\n            !!this.display, // display\n        );\n\n        if (this.expectedAddress\n            && this.expectedAddress.replace(/ /g, '').toUpperCase()\n            !== address.replace(/ /g, '').toUpperCase()) {\n            throw new ErrorState(ErrorType.REQUEST_ASSERTION_FAILED, 'Address mismatch', this);\n        }\n\n        return address;\n    }\n}\n"],"names":[],"mappings":";;;;;MAMqB,sBAAuB,SAAQ,uBAA+B;IAK/E,YAAY,OAAe,EAAE,OAAiB,EAAE,eAAwB,EAAE,gBAAyB;QAC/F,MAAM,IAAI,GAAG,gBAAgB,CAAC,WAAW,CAAC;QAC1C,KAAK,CAAC,OAAO,EAAE,gBAAgB,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;KAC1C;IAEM,MAAM,IAAI,CAAC,SAAoB;QAClC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QAClD,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,GAAG,CAAC,UAAU,CACpC,IAAI,CAAC,OAAO,EACZ,IAAI;QACJ,CAAC,CAAC,IAAI,CAAC,OAAO,CACjB,CAAC;QAEF,IAAI,IAAI,CAAC,eAAe;eACjB,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,WAAW,EAAE;oBACnD,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,WAAW,EAAE,EAAE;YAC7C,MAAM,IAAI,UAAU,CAAC,SAAS,CAAC,wBAAwB,EAAE,kBAAkB,EAAE,IAAI,CAAC,CAAC;SACtF;QAED,OAAO,OAAO,CAAC;KAClB;;;;;"}