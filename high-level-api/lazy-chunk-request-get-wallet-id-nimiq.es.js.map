{"version":3,"file":"lazy-chunk-request-get-wallet-id-nimiq.es.js","sources":["source-mapped://source-mapped/src/high-level-api/requests/nimiq/request-get-wallet-id-nimiq.ts"],"sourcesContent":["import RequestNimiq from './request-nimiq';\nimport { CoinAppConnection } from '../request';\nimport { RequestTypeNimiq } from '../../constants';\n\ntype Transport = import('@ledgerhq/hw-transport').default;\n\nexport default class RequestGetWalletIdNimiq extends RequestNimiq<string> {\n    public readonly type: RequestTypeNimiq.GET_WALLET_ID = RequestTypeNimiq.GET_WALLET_ID;\n    private _coinAppConnection: CoinAppConnection | null = null;\n\n    public constructor() {\n        // public constructor calling the parent protected constructor\n        super();\n    }\n\n    public async call(transport: Transport): Promise<string> {\n        this._coinAppConnection = this._coinAppConnection || await this.checkCoinAppConnection(transport);\n        return this._coinAppConnection.walletId!;\n    }\n\n    public async checkCoinAppConnection(transport: Transport): Promise<CoinAppConnection> {\n        this._coinAppConnection = await super.checkCoinAppConnection(transport);\n        return this._coinAppConnection;\n    }\n\n    public canReuseCoinAppConnection(coinAppConnection: CoinAppConnection): boolean {\n        const canReuseCoinAppConnection = super.canReuseCoinAppConnection(coinAppConnection)\n            && !!coinAppConnection.walletId;\n        if (canReuseCoinAppConnection) {\n            // Use the provided coin app connection which includes the wallet id such that checkCoinAppConnection\n            // doesn't have to be called anymore to determine the wallet id.\n            this._coinAppConnection = coinAppConnection;\n        }\n        return canReuseCoinAppConnection;\n    }\n\n    protected get _isWalletIdDerivationRequired() {\n        return true;\n    }\n}\n"],"names":[],"mappings":";;;;MAMqB,uBAAwB,SAAQ,YAAoB;IAIrE;;QAEI,KAAK,EAAE,CAAC;QALI,SAAI,GAAmC,gBAAgB,CAAC,aAAa,CAAC;QAC9E,uBAAkB,GAA6B,IAAI,CAAC;KAK3D;IAEM,MAAM,IAAI,CAAC,SAAoB;QAClC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,IAAI,MAAM,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;QAClG,OAAO,IAAI,CAAC,kBAAkB,CAAC,QAAS,CAAC;KAC5C;IAEM,MAAM,sBAAsB,CAAC,SAAoB;QACpD,IAAI,CAAC,kBAAkB,GAAG,MAAM,KAAK,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;QACxE,OAAO,IAAI,CAAC,kBAAkB,CAAC;KAClC;IAEM,yBAAyB,CAAC,iBAAoC;QACjE,MAAM,yBAAyB,GAAG,KAAK,CAAC,yBAAyB,CAAC,iBAAiB,CAAC;eAC7E,CAAC,CAAC,iBAAiB,CAAC,QAAQ,CAAC;QACpC,IAAI,yBAAyB,EAAE;;;YAG3B,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;SAC/C;QACD,OAAO,yBAAyB,CAAC;KACpC;IAED,IAAc,6BAA6B;QACvC,OAAO,IAAI,CAAC;KACf;;;;;"}